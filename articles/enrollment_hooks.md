# 10 Insights from South Dakota School Enrollment Data

**Note:** This vignette demonstrates how to analyze South Dakota
enrollment data. Code chunks are not evaluated during package build; run
interactively to see results.

``` r
library(sdschooldata)
library(dplyr)
library(tidyr)
library(ggplot2)

theme_set(theme_minimal(base_size = 14))
```

This vignette explores South Dakota’s public school enrollment data,
surfacing key trends and demographic patterns across 20 years of data
(2006-2025).

------------------------------------------------------------------------

## 1. South Dakota enrollment is slowly growing

Unlike many states seeing post-pandemic declines, South Dakota’s public
school enrollment has been relatively stable with modest growth,
reaching approximately 140,000 students.

``` r
enr <- fetch_enr_multi(c(2015:2020, 2022:2025))

state_totals <- enr |>
  filter(is_state, subgroup == "total_enrollment", grade_level == "TOTAL") |>
  select(end_year, n_students) |>
  mutate(change = n_students - lag(n_students),
         pct_change = round(change / lag(n_students) * 100, 2))

state_totals
```

``` r
ggplot(state_totals, aes(x = end_year, y = n_students)) +
  geom_line(linewidth = 1.2, color = "#003087") +
  geom_point(size = 3, color = "#003087") +
  scale_y_continuous(labels = scales::comma) +
  scale_x_continuous(breaks = seq(2015, 2025, 2)) +
  labs(
    title = "South Dakota Public School Enrollment (2015-2025)",
    subtitle = "Modest growth despite national enrollment declines",
    x = "School Year (ending)",
    y = "Total Enrollment"
  )
```

------------------------------------------------------------------------

## 2. Sioux Falls dominates the state

The Sioux Falls School District is by far the largest in the state, with
more students than the next several districts combined. Rapid City is a
distant second.

``` r
enr_2025 <- fetch_enr(2025)

top_10 <- enr_2025 |>
  filter(is_district, subgroup == "total_enrollment", grade_level == "TOTAL") |>
  arrange(desc(n_students)) |>
  head(10) |>
  select(district_name, n_students)

top_10
```

``` r
top_10 |>
  mutate(district_name = forcats::fct_reorder(district_name, n_students)) |>
  ggplot(aes(x = n_students, y = district_name)) +
  geom_col(fill = "#003087") +
  scale_x_continuous(labels = scales::comma) +
  labs(
    title = "South Dakota's 10 Largest School Districts (2025)",
    x = "Total Enrollment",
    y = NULL
  )
```

------------------------------------------------------------------------

## 3. Native American students are a significant population

South Dakota has one of the highest percentages of Native American
students in the nation, reflecting the state’s large reservation lands
including Pine Ridge, Rosebud, and Standing Rock.

``` r
demographics <- enr_2025 |>
  filter(is_state, grade_level == "TOTAL",
         subgroup %in% c("white", "native_american", "hispanic", "black", "asian", "multiracial")) |>
  mutate(pct = round(pct * 100, 1)) |>
  select(subgroup, n_students, pct) |>
  arrange(desc(n_students))

demographics
```

``` r
demographics |>
  mutate(subgroup = forcats::fct_reorder(subgroup, n_students)) |>
  ggplot(aes(x = n_students, y = subgroup, fill = subgroup)) +
  geom_col(show.legend = FALSE) +
  geom_text(aes(label = paste0(pct, "%")), hjust = -0.1) +
  scale_x_continuous(labels = scales::comma, expand = expansion(mult = c(0, 0.15))) +
  scale_fill_brewer(palette = "Set2") +
  labs(
    title = "South Dakota Student Demographics (2025)",
    x = "Number of Students",
    y = NULL
  )
```

------------------------------------------------------------------------

## 4. Sioux Falls and Rapid City are growing

The state’s two major urban centers continue to grow while rural areas
face challenges, reflecting broader urbanization trends.

``` r
urban_growth <- enr |>
  filter(is_district, subgroup == "total_enrollment", grade_level == "TOTAL",
         grepl("Sioux Falls|Rapid City|Aberdeen|Brookings|Watertown", district_name)) |>
  group_by(district_name) |>
  summarize(
    y2015 = n_students[end_year == 2015],
    y2025 = n_students[end_year == 2025],
    pct_change = round((y2025 / y2015 - 1) * 100, 1),
    .groups = "drop"
  ) |>
  arrange(desc(pct_change))

urban_growth
```

``` r
enr |>
  filter(is_district, subgroup == "total_enrollment", grade_level == "TOTAL",
         grepl("Sioux Falls|Rapid City|Aberdeen|Brookings", district_name)) |>
  ggplot(aes(x = end_year, y = n_students, color = district_name)) +
  geom_line(linewidth = 1.2) +
  geom_point(size = 2) +
  scale_y_continuous(labels = scales::comma) +
  labs(
    title = "South Dakota Urban District Growth",
    subtitle = "Sioux Falls leads in both size and growth",
    x = "School Year",
    y = "Enrollment",
    color = "District"
  )
```

------------------------------------------------------------------------

## 5. Many tiny rural districts

South Dakota has a large number of very small school districts, many
with fewer than 200 students, reflecting the state’s rural character and
sparse population.

``` r
small <- enr_2025 |>
  filter(is_district, subgroup == "total_enrollment", grade_level == "TOTAL") |>
  filter(n_students < 200) |>
  arrange(n_students) |>
  head(15) |>
  select(district_name, n_students)

small
```

------------------------------------------------------------------------

## 6. Hispanic enrollment is rising

While still a small percentage of total enrollment, Hispanic students
are the fastest-growing demographic group in South Dakota schools.

``` r
# Use years with reliable data (avoiding 2006, 2008, 2021 which have parsing issues)
reliable_years <- c(2007, 2009:2020, 2022:2025)
enr_full <- fetch_enr_multi(reliable_years)

hispanic_trend <- enr_full |>
  filter(is_state, subgroup == "hispanic", grade_level == "TOTAL") |>
  filter(!is.na(pct)) |>
  mutate(pct = round(pct * 100, 2)) |>
  select(end_year, n_students, pct)

hispanic_trend
```

``` r
ggplot(hispanic_trend, aes(x = end_year, y = pct)) +
  geom_line(linewidth = 1.2, color = "#2E8B57") +
  geom_point(size = 3, color = "#2E8B57") +
  labs(
    title = "Hispanic Student Enrollment Growth",
    subtitle = "Steady increase over two decades",
    x = "School Year",
    y = "Percent of Total Enrollment"
  )
```

------------------------------------------------------------------------

## Summary

South Dakota’s school enrollment data reveals:

- **Steady growth**: Unlike many states, South Dakota enrollment remains
  stable
- **Urban concentration**: Sioux Falls and Rapid City dominate
  enrollment
- **Native American presence**: Significant Native American student
  population
- **Rural challenges**: Many very small districts across the state
- **Demographic change**: Hispanic enrollment growing steadily

These trends have implications for school funding, facility planning,
and educational equity across the Mount Rushmore State.

------------------------------------------------------------------------

*Data sourced from the South Dakota Department of Education [Fall
Census](https://doe.sd.gov/ofm/enrollment.aspx).*
